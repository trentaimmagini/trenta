

# created big list of axis cams with something like this:
find /raid/raw/serviceprobes/80-TCP_GetRequest/80-TCP_GetRequest-*|grep -v result|xargs grep AXIS | grep 'Network=20Camera' |grep =20200=20 > axis

# removed duplicates, connection refused, and connection tarpits with this:
cat axis |awk '{print $1}'|cut -f2 -d:|sort|uniq|while read ip; do
url=http://$ip/axis-cgi/mjpg/video.cgi
curl -y 2 -Y 2 -I -s -f --connect-timeout 1 $url >/dev/null && echo $url
done |tee axis_live

# removed pesky sites that gave 200 to HEADs but 404 to GETs:
cat axis_live |while read url; do if curl -v "$url" 2>&1|head -c1000 | \
grep 'HTTP/1.0 200 OK' >/dev/null; then echo "$url" | tee -a axis_ok
else echo "not ok: $url"; fi; done

